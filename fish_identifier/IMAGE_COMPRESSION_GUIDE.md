# üì∏ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é –¥–≤–æ–π–Ω–æ–≥–æ —Å–∂–∞—Ç–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üéØ –¶–µ–ª—å

–°–Ω–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ 60-80% –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ AI API –¥–ª—è:
- –≠–∫–æ–Ω–æ–º–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –£–º–µ–Ω—å—à–µ–Ω–∏—è –∑–∞—Ç—Ä–∞—Ç –Ω–∞ API
- –£—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ —Å–ª–∞–±—ã—Ö —Å–µ—Ç—è—Ö

## üîÑ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –¥–≤–æ–π–Ω–æ–≥–æ —Å–∂–∞—Ç–∏—è

**–£—Ä–æ–≤–µ–Ω—å 1: –ë–∞–∑–æ–≤–æ–µ —Å–∂–∞—Ç–∏–µ (image_picker)**
- –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤—ã–±–æ—Ä–µ/—Å–æ–∑–¥–∞–Ω–∏–∏ —Ñ–æ—Ç–æ
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä—ã –∏ –±–∞–∑–æ–≤–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ

**–£—Ä–æ–≤–µ–Ω—å 2: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–∂–∞—Ç–∏–µ (–ø–µ—Ä–µ–¥ API)**
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- –¶–µ–ª–µ–≤–æ–π —Ä–∞–∑–º–µ—Ä: –¥–æ 500KB
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–ª—è AI —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

## üì¶ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –î–ª—è Flutter (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```yaml
# pubspec.yaml
dependencies:
  flutter_image_compress: ^2.3.0  # –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞–∫–µ—Ç –¥–ª—è —Å–∂–∞—Ç–∏—è
  image_picker: ^1.1.2            # –î–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–æ—Ç–æ
  path_provider: ^2.1.3           # –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—É—Ç—è–º–∏
  path: ^1.9.0                    # –£—Ç–∏–ª–∏—Ç—ã –ø—É—Ç–µ–π
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è)

```yaml
dependencies:
  image: ^4.5.4  # –ë–æ–ª–µ–µ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Ä–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
```

## üõ†Ô∏è –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ —Å–∂–∞—Ç–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç A: –° flutter_image_compress (–ø—Ä–æ—â–µ, –±—ã—Å—Ç—Ä–µ–µ)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `lib/services/image_compression_service.dart`:

```dart
import 'dart:io';
import 'dart:typed_data';
import 'package:flutter/foundation.dart';
import 'package:flutter_image_compress/flutter_image_compress.dart';
import 'package:path_provider/path_provider.dart';
import 'package:path/path.dart' as p;

class ImageCompressionService {
  // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∂–∞—Ç–∏—è
  static const int maxWidth = 1920;
  static const int maxHeight = 1920;
  static const int quality = 85;
  static const int maxFileSizeKB = 500;

  /// –°–∂–∞—Ç—å —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  static Future<Uint8List> compressImageFile(String imagePath) async {
    try {
      debugPrint('üì∏ Compressing: $imagePath');

      // –ü–æ–ª—É—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
      final originalFile = File(imagePath);
      final originalSize = await originalFile.length();
      debugPrint('üìè Original: ${(originalSize / 1024).toStringAsFixed(2)} KB');

      // –°–∂–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
      final compressedBytes = await FlutterImageCompress.compressWithFile(
        imagePath,
        minWidth: maxWidth,
        minHeight: maxHeight,
        quality: quality,
        format: CompressFormat.jpeg,
      );

      if (compressedBytes == null) {
        throw Exception('Compression failed');
      }

      final compressedSize = compressedBytes.length;
      debugPrint('üóúÔ∏è Compressed: ${(compressedSize / 1024).toStringAsFixed(2)} KB');
      debugPrint('üí∞ Savings: ${((1 - compressedSize / originalSize) * 100).toStringAsFixed(1)}%');

      // –ï—Å–ª–∏ –≤—Å—ë –µ—â—ë —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π - —Å–∂–∞—Ç—å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–µ–µ
      if (compressedSize > maxFileSizeKB * 1024) {
        return await _compressAggressively(imagePath, compressedBytes);
      }

      return compressedBytes;
    } catch (e) {
      debugPrint('‚ùå Compression error: $e');
      return await File(imagePath).readAsBytes(); // Fallback
    }
  }

  /// –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ —Å–∂–∞—Ç–∏–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
  static Future<Uint8List> _compressAggressively(
    String imagePath,
    Uint8List firstAttempt,
  ) async {
    debugPrint('‚ö†Ô∏è File too large, applying aggressive compression...');

    final aggressiveBytes = await FlutterImageCompress.compressWithFile(
      imagePath,
      minWidth: 1280,
      minHeight: 1280,
      quality: 70, // –ù–∏–∂–µ –∫–∞—á–µ—Å—Ç–≤–æ
      format: CompressFormat.jpeg,
    );

    if (aggressiveBytes == null) return firstAttempt;

    debugPrint('üóúÔ∏è Aggressive result: ${(aggressiveBytes.length / 1024).toStringAsFixed(2)} KB');
    return aggressiveBytes;
  }

  /// –°–∂–∞—Ç—å –±–∞–π—Ç—ã –Ω–∞–ø—Ä—è–º—É—é (–¥–ª—è in-memory –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
  static Future<Uint8List> compressImageBytes(Uint8List imageBytes) async {
    try {
      final compressedBytes = await FlutterImageCompress.compressWithList(
        imageBytes,
        minWidth: maxWidth,
        minHeight: maxHeight,
        quality: quality,
        format: CompressFormat.jpeg,
      );

      debugPrint('üíæ In-memory compressed: ${(compressedBytes.length / 1024).toStringAsFixed(2)} KB');
      return compressedBytes;
    } catch (e) {
      debugPrint('‚ùå In-memory compression error: $e');
      return imageBytes;
    }
  }

  /// –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–∂–∞—Ç–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  static Future<String> compressAndSaveImage(String sourcePath) async {
    try {
      final compressedBytes = await compressImageFile(sourcePath);

      final tempDir = await getTemporaryDirectory();
      final timestamp = DateTime.now().millisecondsSinceEpoch;
      final extension = p.extension(sourcePath);
      final fileName = 'compressed_$timestamp$extension';
      final targetPath = p.join(tempDir.path, fileName);

      final file = File(targetPath);
      await file.writeAsBytes(compressedBytes);

      debugPrint('üíæ Saved to: $targetPath');
      return targetPath;
    } catch (e) {
      debugPrint('‚ùå Save error: $e');
      return sourcePath;
    }
  }

  /// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω—É–∂–Ω–æ –ª–∏ —Å–∂–∞—Ç–∏–µ
  static Future<bool> needsCompression(String imagePath) async {
    try {
      final file = File(imagePath);
      final size = await file.length();
      return size > maxFileSizeKB * 1024;
    } catch (e) {
      return false;
    }
  }

  /// –û—Ü–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä base64
  static int estimateBase64Size(Uint8List bytes) {
    return (bytes.length * 1.33).ceil();
  }
}
```

### –í–∞—Ä–∏–∞–Ω—Ç B: –° –ø–∞–∫–µ—Ç–æ–º image (–±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è)

```dart
import 'dart:typed_data';
import 'package:flutter/foundation.dart';
import 'package:image/image.dart' as img;

class ImageCompressionService {
  static Future<Uint8List> compressImage(Uint8List originalBytes) async {
    try {
      // –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
      img.Image? image = img.decodeImage(originalBytes);
      if (image == null) {
        debugPrint('‚ö†Ô∏è Failed to decode image');
        return originalBytes;
      }

      final originalSize = originalBytes.length / (1024 * 1024);
      debugPrint('üì∏ Original: ${originalSize.toStringAsFixed(2)} MB');
      debugPrint('üìê Dimensions: ${image.width}x${image.height}');

      // –†–µ—Å–∞–π–∑ –µ—Å–ª–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–µ
      const int maxDimension = 1920;
      if (image.width > maxDimension || image.height > maxDimension) {
        if (image.width > image.height) {
          image = img.copyResize(image, width: maxDimension);
        } else {
          image = img.copyResize(image, height: maxDimension);
        }
        debugPrint('üìè Resized to: ${image.width}x${image.height}');
      }

      // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ JPEG —Å –∫–∞—á–µ—Å—Ç–≤–æ–º 85%
      final compressedBytes = img.encodeJpg(image, quality: 85);

      final compressedSize = compressedBytes.length / (1024 * 1024);
      final savings = ((originalSize - compressedSize) / originalSize * 100).round();

      debugPrint('‚úÖ Compressed: ${compressedSize.toStringAsFixed(2)} MB');
      debugPrint('üí∞ Savings: $savings%');

      return Uint8List.fromList(compressedBytes);
    } catch (e) {
      debugPrint('‚ùå Compression error: $e');
      return originalBytes;
    }
  }
}
```

## üîß –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ image_picker (–£—Ä–æ–≤–µ–Ω—å 1)

```dart
// –í –≤–∞—à–µ–º —ç–∫—Ä–∞–Ω–µ –≤—ã–±–æ—Ä–∞ —Ñ–æ—Ç–æ
Future<void> _pickImage(ImageSource source) async {
  try {
    final XFile? image = await ImagePicker().pickImage(
      source: source,
      maxWidth: 1920,      // ‚¨ÖÔ∏è –£—Ä–æ–≤–µ–Ω—å 1: –ë–∞–∑–æ–≤–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ
      maxHeight: 1920,     // ‚¨ÖÔ∏è –£—Ä–æ–≤–µ–Ω—å 1: –ë–∞–∑–æ–≤–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ
      imageQuality: 85,    // ‚¨ÖÔ∏è –£—Ä–æ–≤–µ–Ω—å 1: –ë–∞–∑–æ–≤–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
    );

    if (image != null) {
      await _processImage(image.path);
    }
  } catch (e) {
    debugPrint('Error picking image: $e');
  }
}
```

## üì§ –®–∞–≥ 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ—Ç–ø—Ä–∞–≤–∫—É AI (–£—Ä–æ–≤–µ–Ω—å 2)

### –ë—ã–ª–æ (–±–µ–∑ —Å–∂–∞—Ç–∏—è):

```dart
Future<void> _identifyFish(String imagePath) async {
  // ‚ùå –ü–õ–û–•–û: –ü—Ä—è–º–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ base64
  final imageBytes = await File(imagePath).readAsBytes();
  final base64Image = base64Encode(imageBytes);

  final result = await aiService.identify(base64Image);
}
```

### –°—Ç–∞–ª–æ (—Å –¥–≤–æ–π–Ω—ã–º —Å–∂–∞—Ç–∏–µ–º):

```dart
import 'dart:convert';
import '../services/image_compression_service.dart';

Future<void> _identifyFish(String imagePath) async {
  try {
    // ‚úÖ –•–û–†–û–®–û: –£—Ä–æ–≤–µ–Ω—å 2 —Å–∂–∞—Ç–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
    final compressedBytes = await ImageCompressionService.compressImageFile(imagePath);
    final base64Image = base64Encode(compressedBytes);

    final result = await aiService.identify(base64Image);
  } catch (e) {
    debugPrint('Error: $e');
  }
}
```

## üìä –®–∞–≥ 4: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤—å—Ç–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–∂–∞—Ç–∏—è:

```dart
class CompressionStats {
  static int totalOriginalBytes = 0;
  static int totalCompressedBytes = 0;
  static int compressionCount = 0;

  static void recordCompression(int originalSize, int compressedSize) {
    totalOriginalBytes += originalSize;
    totalCompressedBytes += compressedSize;
    compressionCount++;
  }

  static String getStats() {
    if (compressionCount == 0) return 'No compressions yet';

    final avgSavings = ((1 - totalCompressedBytes / totalOriginalBytes) * 100).toStringAsFixed(1);
    final totalSavedMB = ((totalOriginalBytes - totalCompressedBytes) / (1024 * 1024)).toStringAsFixed(2);

    return '''
üìä Compression Statistics:
   Total images: $compressionCount
   Average savings: $avgSavings%
   Total saved: $totalSavedMB MB
    ''';
  }
}
```

## ‚öôÔ∏è –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª `lib/config/compression_config.dart`:

```dart
class CompressionConfig {
  // –†–∞–∑–º–µ—Ä—ã
  static const int maxWidth = 1920;
  static const int maxHeight = 1920;

  // –ö–∞—á–µ—Å—Ç–≤–æ
  static const int normalQuality = 85;  // –û–±—ã—á–Ω–æ–µ —Å–∂–∞—Ç–∏–µ
  static const int aggressiveQuality = 70;  // –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ —Å–∂–∞—Ç–∏–µ

  // –õ–∏–º–∏—Ç—ã
  static const int maxFileSizeKB = 500;  // –¶–µ–ª–µ–≤–æ–π —Ä–∞–∑–º–µ—Ä
  static const int warningThresholdKB = 300;  // –ü–æ—Ä–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

  // –§–æ—Ä–º–∞—Ç—ã
  static bool useJpegForPhotos = true;
  static bool usePngForGraphics = false;

  // –†–µ–∂–∏–º—ã
  static bool enableAggressiveMode = true;
  static bool enableCaching = true;
}
```

## üß™ –®–∞–≥ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∂–∞—Ç–∏—è:

```dart
import 'package:flutter_test/flutter_test.dart';

void main() {
  group('ImageCompressionService', () {
    test('should compress large images', () async {
      // –¢–µ—Å—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
      final originalBytes = await File('test_assets/large_image.jpg').readAsBytes();
      final compressed = await ImageCompressionService.compressImageBytes(originalBytes);

      expect(compressed.length, lessThan(originalBytes.length));
      expect(compressed.length, lessThan(500 * 1024)); // < 500KB
    });

    test('should maintain quality for small images', () async {
      final smallBytes = await File('test_assets/small_image.jpg').readAsBytes();
      final compressed = await ImageCompressionService.compressImageBytes(smallBytes);

      // –ú–∞–ª–µ–Ω—å–∫–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –¥–æ–ª–∂–Ω–æ —Å–∏–ª—å–Ω–æ —Å–∂–∏–º–∞—Ç—å—Å—è
      expect(compressed.length, greaterThan(smallBytes.length * 0.8));
    });
  });
}
```

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
```
üì∑ –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ: 3.5 MB
üì§ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ API: 3.5 MB ‚Üí base64: 4.7 MB
‚è±Ô∏è –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ (4G): 8-12 —Å–µ–∫—É–Ω–¥
üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å API: 1 –∑–∞–ø—Ä–æ—Å = 3.5 MB
```

### –ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
```
üì∑ –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ: 3.5 MB
üóúÔ∏è –ü–æ—Å–ª–µ –£—Ä–æ–≤–Ω—è 1 (picker): 2.1 MB
üóúÔ∏è –ü–æ—Å–ª–µ –£—Ä–æ–≤–Ω—è 2 (service): 450 KB
üì§ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ API: 450 KB ‚Üí base64: 600 KB
‚è±Ô∏è –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ (4G): 1-2 —Å–µ–∫—É–Ω–¥—ã
üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å API: 1 –∑–∞–ø—Ä–æ—Å = 450 KB
üìä –≠–∫–æ–Ω–æ–º–∏—è: 87% —Ç—Ä–∞—Ñ–∏–∫–∞, 6-10x –±—ã—Å—Ç—Ä–µ–µ
```

## üéØ Checklist –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`flutter_image_compress` –∏–ª–∏ `image`)
- [ ] –°–æ–∑–¥–∞—Ç—å `ImageCompressionService`
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `image_picker`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∂–∞—Ç–∏–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ API
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [ ] –ò–∑–º–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ (—Ä–∞–∑–º–µ—Ä, –≤—Ä–µ–º—è, –∫–∞—á–µ—Å—Ç–≤–æ)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ö–∞—á–µ—Å—Ç–≤–æ vs –†–∞–∑–º–µ—Ä**
   - 85% –∫–∞—á–µ—Å—Ç–≤–æ - –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è AI —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
   - –ù–µ –æ–ø—É—Å–∫–∞–π—Ç–µ—Å—å –Ω–∏–∂–µ 70% - –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å

2. **–§–æ—Ä–º–∞—Ç—ã**
   - JPEG –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π (–ª—É—á—à–µ–µ —Å–∂–∞—Ç–∏–µ)
   - PNG –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∏ —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é
   - –ò–∑–±–µ–≥–∞–π—Ç–µ BMP, TIFF (—Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ)

3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –°–∂–∞—Ç–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
   - –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç UI
   - –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

4. **Fallback**
   - –í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–≤—Ä–∞—Ç –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—É –ø—Ä–∏ –æ—à–∏–±–∫–µ
   - –ù–µ —Ç–µ—Ä—è–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

5. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –•—Ä–∞–Ω–∏—Ç–µ —Å–∂–∞—Ç—ã–µ –≤–µ—Ä—Å–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ
   - –ò–∑–±–µ–≥–∞–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Å–∂–∞—Ç–∏—è –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [flutter_image_compress –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://pub.dev/packages/flutter_image_compress)
- [image package](https://pub.dev/packages/image)
- [Best practices –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏](https://docs.flutter.dev/perf/rendering/best-practices)

## üí° –°–æ–≤–µ—Ç—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ —Å–∂–∞—Ç–∏–µ**
   ```dart
   // –°–∂–∏–º–∞—Ç—å —Å–∏–ª—å–Ω–µ–µ –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω–æ–π —Å–µ—Ç–∏
   final quality = isSlowNetwork ? 70 : 85;
   ```

2. **–ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ —Å–∂–∞—Ç–∏–µ**
   ```dart
   // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Å—Ä–∞–∑—É, –ø–æ—Ç–æ–º –≤—ã—Å–æ–∫–æ–µ
   await sendPreview(lowQualityImage);
   await sendFull(highQualityImage);
   ```

3. **–ë–∞—Ç—á–∏–Ω–≥**
   ```dart
   // –°–∂–∏–º–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
   await Future.wait([
     compress(image1),
     compress(image2),
     compress(image3),
   ]);
   ```

---

**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-12
**–í–µ—Ä—Å–∏—è:** 1.0
**–ê–≤—Ç–æ—Ä:** Claude Code Assistant
