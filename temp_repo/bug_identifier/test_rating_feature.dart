import 'package:flutter/material.dart';
import 'package:acs/services/rating_service.dart';

/// –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞ –æ—Ü–µ–Ω–∫–∏
void main() async {
  WidgetsFlutterBinding.ensureInitialized();

  debugPrint('=== –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï RATING SERVICE ===\n');

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–µ—Ä–≤–∏—Å
  await RatingService().initialize();
  debugPrint('‚úì RatingService –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω\n');

  // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  debugPrint('–°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫–∏...');
  await RatingService().resetRatingDialogShows();
  debugPrint('‚úì –°—á–µ—Ç—á–∏–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã\n');

  // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ shouldShowRatingDialog –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
  debugPrint('–¢–ï–°–¢ 1: –ü–µ—Ä–≤—ã–π –ø–æ–∫–∞–∑');
  bool shouldShow = await RatingService().shouldShowRatingDialog();
  debugPrint('–î–æ–ª–∂–µ–Ω –ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –¥–∏–∞–ª–æ–≥: ${shouldShow ? "–î–ê" : "–ù–ï–¢"}');
  debugPrint('–û–∂–∏–¥–∞–µ—Ç—Å—è: –ù–ï–¢ (–ø—Ä–æ—à–ª–æ –º–µ–Ω–µ–µ 24 —á–∞—Å–æ–≤ —Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏)\n');

  // –¢–µ—Å—Ç 2: –°–∏–º—É–ª–∏—Ä—É–µ–º, —á—Ç–æ –ø—Ä–æ—à–ª–æ 24 —á–∞—Å–∞ (—Ö–∞–∫ –¥–ª—è —Ç–µ—Å—Ç–∞)
  debugPrint('–¢–ï–°–¢ 2: –ü–æ—Å–ª–µ 24 —á–∞—Å–æ–≤ —Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏');
  // –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –Ω—É–∂–Ω–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å 24 —á–∞—Å–∞ –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞—Ç—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Ä—É—á–Ω—É—é
  debugPrint('(–í —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö –Ω—É–∂–Ω–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å 24 —á–∞—Å–∞)\n');

  // –¢–µ—Å—Ç 3: –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –ø–æ–∫–∞–∑–æ–≤
  debugPrint('–¢–ï–°–¢ 3: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –ø–æ–∫–∞–∑–æ–≤');
  await RatingService().incrementRatingDialogShows();
  int showsCount = await RatingService().getRatingDialogShowsCount();
  debugPrint('‚úì –°—á–µ—Ç—á–∏–∫ –ø–æ–∫–∞–∑–æ–≤: $showsCount');
  debugPrint('–û–∂–∏–¥–∞–µ—Ç—Å—è: 1\n');

  // –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –ø–æ–∫–∞–∑–∞ (–¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —á–µ—Ä–µ–∑ 3 –¥–Ω—è)
  debugPrint('–¢–ï–°–¢ 4: –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –ø–æ–∫–∞–∑–∞');
  shouldShow = await RatingService().shouldShowRatingDialog();
  debugPrint('–î–æ–ª–∂–µ–Ω –ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –¥–∏–∞–ª–æ–≥: ${shouldShow ? "–î–ê" : "–ù–ï–¢"}');
  debugPrint('–û–∂–∏–¥–∞–µ—Ç—Å—è: –ù–ï–¢ (–ø—Ä–æ—à–ª–æ –º–µ–Ω–µ–µ 3 –¥–Ω–µ–π —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ–∫–∞–∑–∞)\n');

  // –¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–∫–∞–∑–æ–≤
  debugPrint('–¢–ï–°–¢ 5: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫–∞–∑–æ–≤');
  await RatingService().incrementRatingDialogShows();
  await RatingService().incrementRatingDialogShows();
  showsCount = await RatingService().getRatingDialogShowsCount();
  debugPrint('‚úì –°—á–µ—Ç—á–∏–∫ –ø–æ–∫–∞–∑–æ–≤: $showsCount');
  shouldShow = await RatingService().shouldShowRatingDialog();
  debugPrint('–î–æ–ª–∂–µ–Ω –ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –¥–∏–∞–ª–æ–≥: ${shouldShow ? "–î–ê" : "–ù–ï–¢"}');
  debugPrint('–û–∂–∏–¥–∞–µ—Ç—Å—è: –ù–ï–¢ (–¥–æ—Å—Ç–∏–≥–Ω—É—Ç –º–∞–∫—Å–∏–º—É–º –ø–æ–∫–∞–∑–æ–≤: 3)\n');

  // –¢–µ—Å—Ç 6: –û—Ç–º–µ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ü–µ–Ω–∫–∏
  debugPrint('–¢–ï–°–¢ 6: –û—Ç–º–µ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ü–µ–Ω–∫–∏');
  await RatingService().resetRatingDialogShows();
  await RatingService().markRatingCompleted();
  shouldShow = await RatingService().shouldShowRatingDialog();
  debugPrint('–î–æ–ª–∂–µ–Ω –ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –¥–∏–∞–ª–æ–≥: ${shouldShow ? "–î–ê" : "–ù–ï–¢"}');
  debugPrint('–û–∂–∏–¥–∞–µ—Ç—Å—è: –ù–ï–¢ (–æ—Ü–µ–Ω–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞)\n');

  debugPrint('=== –í–°–ï –¢–ï–°–¢–´ –ó–ê–í–ï–†–®–ï–ù–´ ===');

  debugPrint('\nüìã –†–ï–ó–Æ–ú–ï:');
  debugPrint('1. ‚úì –î–∏–∞–ª–æ–≥ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –ø–µ—Ä–≤—ã–µ 24 —á–∞—Å–∞');
  debugPrint('2. ‚úì –°—á–µ—Ç—á–∏–∫ –ø–æ–∫–∞–∑–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
  debugPrint('3. ‚úì –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª 3 –¥–Ω—è –º–µ–∂–¥—É –ø–æ–∫–∞–∑–∞–º–∏');
  debugPrint('4. ‚úì –ú–∞–∫—Å–∏–º—É–º 3 –ø–æ–∫–∞–∑–∞');
  debugPrint('5. ‚úì –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ü–µ–Ω–∫–∏ –¥–∏–∞–ª–æ–≥ –±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è');
}
